<!DOCTYPE html>
<html lang="en">
<!--https://html-online.com/articles/blinking-text-css-animation/-->
<!--
https://github.com/atomiks/tippyjs
https://atomiks.github.io/tippyjs/
https://developer.snapappointments.com/bootstrap-select/
npm install bootstrap-select
npm install --save @types/bootstrap-select
npm install @types/jquery
https://www.npmjs.com/package/@types/jquery/v/3.5.18
npm install --save @types/jquery
https://www.jsdelivr.com/package/npm/jquery
https://clipboardjs.com/
-->
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>W40K</title>
	<meta http-equiv="Cache-Control" content="must-revalidate, max-age=86400"/>
	<link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;1,100;1,300;1,400;1,500&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/startbootstrap-sb-admin-2/4.1.4/css/sb-admin-2.css" integrity="sha512-gOfBez3ehpchNxj4TfBZfX1MDLKLRif67tFJNLQSpF13lXM1t9ffMNCbZfZNBfcN2/SaWvOf+7CvIHtQ0Nci2A==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
	<link rel="stylesheet" href="assets/w40k-chart.css">
	<link rel="stylesheet" href="assets/scrollbars-but-nice.css">
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/startbootstrap-sb-admin-2/4.1.4/js/sb-admin-2.js" integrity="sha512-M82XdXhPLLSki+Ld1MsafNzOgHQB3txZr8+SQlGXSwn6veeqtYhPLbQeAfk9Y/Q9/gXcfa1jWT4YYUeoei6Uow==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
	<script src="https://unpkg.com/lzutf8@0.6.3/build/production/lzutf8.js"></script>
	<script src="assets/w40k-chart.js"></script>
	<!--
	<script src="https://unpkg.com/@popperjs/core@2"></script>
	<script src="https://unpkg.com/tippy.js@6"></script>
	-->
	<!--
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js" integrity="sha512-oJp0DdQuQQrRsKVly+Ww6fAN1GwJN7d1bi8UubpEbzDUh84WrJ2CFPBnT4LqBCcfqTcHR5OGXFFhaPe3g1/bzQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	-->
	<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script>
</head>

<body data-bs-theme="dark" class="override">

<div class="dropdown dropright mb-2 mr-5">
	<a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		<i class="fa-fw fas fa-bars"></i>
	</a>
	<div style="width: 450px;" class="dropdown-menu" aria-labelledby="dropdownMenuLink">
		<a class="dropdown-item" href="?source=ow">Open Only War</a>
		<a class="dropdown-item" href="?source=dh2">Open Dark Heresy 2</a>
		<a class="dropdown-item" href="?" id="saveLinkAlt">Save settings (bookmarkable link)</a>
		<a class="dropdown-item" href="?" style="display: none" id="saveLink"></a>
		<a class="dropdown-item" href="" id="clearLink">Clear settings and reload</a>
		<div class="input-group input-group-sm dropdown-item">
			<div class="input-group-prepend">
				<span class="input-group-text" id="basic-addon1">Settings</span>
			</div>
			<input title="paste settings to load settings" type="text" class="form-control" id="settingsToCopy">
			<div class="input-group-append">
				<a class="clipboard btn btn-secondary" data-toggle="tooltip" title="copy settings to clipboard" data-clipboard-target="#settingsToCopy" data-clipboard-action="copy">
					<i class="fa-fw fas fa-clipboard"></i>
				</a>
			</div>
		</div>
	</div>
</div>

<div>
	<button type="button" class="export_all btn btn-sm btn-primary" id="export_all">Export all to xls</button>
</div>

<h1>Aptitudes</h1>
<div>
	<div class="form-group">
		<label for="aptitudeWishlistSelect">wishlist:</label>
		<select style="height: 204px; width: 100%" multiple data-actions-box="true" id="aptitudeWishlistSelect" name="aptitudeWishlistSelect" class="aptitudeWishlistSelect form-control _selectpicker" data-live-search="true"></select>
	</div>
	<div id="classSelectContainer" class="form-group">
		<label for="classSelect">Speciality:</label>
		<select id="classSelect" name="classSelect" class="classSelect form-control _selectpicker" data-live-search="true"></select>
	</div>
	<div id="worldSelectContainer" class="form-group">
		<label for="worldSelect">World:</label>
		<select id="worldSelect" name="worldSelect" class="worldSelect form-control _selectpicker" data-live-search="true"></select>
	</div>
	<div id="backgroundSelectContainer" class="form-group">
		<label for="backgroundSelect">Background:</label>
		<select id="backgroundSelect" name="backgroundSelect" class="backgroundSelect form-control _selectpicker" data-live-search="true"></select>
	</div>
	<div id="roleSelectContainer" class="form-group">
		<label for="roleSelect">Role:</label>
		<select id="roleSelect" name="roleSelect" class="roleSelect form-control _selectpicker" data-live-search="true"></select>
	</div>
	<div class="form-group">
		<label for="aptitudeSelect">Extra aptitudes:</label>
		<select style="height: 204px; width: 100%" multiple data-actions-box="true" id="aptitudeSelect" name="aptitudeSelect" class="aptitudeSelect form-control _selectpicker" data-live-search="true"></select>
	</div>
	<div class="form-group">
		<label for="selectedAptitudes">Resulting aptitudes:</label>
		<div class="selectedAptitudes" id="selectedAptitudes"></div>
	</div>
	<div class="form-group">
		<div id="skip0" name="skip0" class="skip0 custom-control custom-checkbox">
			<input type="checkbox" class="custom-control-input" id="skip0Cb" name="skip0Cb">
			<label class="custom-control-label" for="skip0Cb">Hide lines which do not match any aptitude</label>
		</div>
	</div>
</div>

<h1>Characteristics</h1>
<div>
	<div class="form-group">
		<label for="skill_wishlist">wishlist / filter (separated by enter):</label>
		<div title="toggle wishlist" style="display: inline-block;" class="btn-group-toggle" data-toggle="buttons">
			<label class="btn btn-sm active">
				<input id="characteristic_wishlist_toggle" type="checkbox" checked>
			</label>
        </div>
		<button title="clear wishlist" type="button" class="btn btn-sm btn-danger" id="characteristic_wishlist_clear"><i class="fa-fw fa-solid fa-trash"></i></button>
		<textarea rows="3" class="wishlist form-control" id="characteristic_wishlist" name="characteristic_wishlist"></textarea>
	</div>
	<div class="form-group">
		<div class="input-group input-group-sm">
			<input type="text" class="form-control" disabled id="costCharacteristics" placeholder="cost">
			<div class="input-group-append">
				<button title="clear selection" class="btn btn-outline-secondary" type="button" id="costCharacteristicsClear"><i class="fa-fw fa-solid fa-trash"></i></button>
			</div>
		</div>
	</div>
	<div style="display: flex;">
    	<div style="display: inline-block; flex-grow: 99; flex-shrink: 0;">
			<button type="button" class="btn btn-sm btn-primary mb-1" id="export_characteristic">Export to clipboard</button>
			<button type="button" class="btn btn-sm btn-primary mb-1" id="export_characteristic_wishlist">Export to wishlist</button>
		</div>
	</div>
	<div class="characteristic header">
		<div>
			<div></div>
			<div title="cost">cost</div>
			<div title="aptitude matches">AM</div>
			<div title="characteristic">characteristic</div>
			<div title="aptitude">aptitude</div>
		</div>
	</div>
	<div class="tablelike characteristic" id="characteristic"></div>
</div>

<h1>Skills</h1>
<div>
	<div class="form-group">
		<label for="skill_wishlist">wishlist / filter (separated by enter):</label>
		<div title="toggle wishlist" style="display: inline-block;" class="btn-group-toggle" data-toggle="buttons">
			<label class="btn btn-sm active">
				<input id="skill_wishlist_toggle" type="checkbox" checked>
			</label>
        </div>
		<button title="clear wishlist" type="button" class="btn btn-sm btn-danger" id="skill_wishlist_clear"><i class="fa-fw fa-solid fa-trash"></i></button>
		<textarea rows="3" class="wishlist form-control" id="skill_wishlist" name="skill_wishlist"></textarea>
	</div>
	<div class="form-group">
		<div class="input-group input-group-sm">
			<input type="text" class="form-control" disabled id="costSkills" placeholder="cost">
			<div class="input-group-append">
				<button title="clear selection" class="btn btn-outline-secondary" type="button" id="costSkillsClear"><i class="fa-fw fa-solid fa-trash"></i></button>
			</div>
		</div>
	</div>
	<div style="display: flex;">
		<div style="display: inline-block; flex-grow: 99; flex-shrink: 0;">
			<button type="button" class="btn btn-sm btn-primary mb-1" id="export_skill">Export to clipboard</button>
			<button type="button" class="btn btn-sm btn-primary mb-1" id="export_skill_wishlist">Export to wishlist</button>
		</div>
		<div style="padding-left: 1em; display: inline-block; flex-grow: 0; flex-shrink: 99;">
			Click to see skill ranks
			<button id="skillRanksHelp" class="unstyled-button"><i class="icon-as-button fas fa-question-circle"></i></button>
		</div>
	</div>
	<div class="skill header">
		<div>
			<div></div>
			<div title="cost">cost</div>
			<div title="aptitude matches">AM</div>
			<div title="skill">skill</div>
			<div title="aptitude">aptitude</div>
			<div title="aptitude">aptitude</div>
		</div>
	</div>
	<div class="tablelike skill" id="skill"></div>
</div>

<h1>Talents</h1>
<div>
	<div class="form-group">
		<label for="wishlist">wishlist / filter (separated by enter):</label>
		<div title="toggle wishlist" style="display: inline-block;" class="btn-group-toggle" data-toggle="buttons">
			<label class="btn btn-sm active">
				<input id="talent_wishlist_toggle" type="checkbox" checked>
			</label>
        </div>
		<button title="clear wishlist" type="button" class="btn btn-sm btn-danger" id="wishlist_clear"><i class="fa-fw fa-solid fa-trash"></i></button>
        <textarea rows="3" class="wishlist form-control" id="wishlist" name="wishlist"></textarea>
	</div>
	<div class="form-group">
		<div class="input-group input-group-sm">
			<input type="text" class="form-control" disabled id="costTalents" placeholder="cost">
			<div class="input-group-append">
				<button title="clear selection" class="btn btn-outline-secondary" type="button" id="costTalentsClear"><i class="fa-fw fa-solid fa-trash"></i></button>
			</div>
		</div>
	</div>
	<div style="display: flex;">
		<div style="display: inline-block; flex-grow: 99; flex-shrink: 0;">
			<button type="button" class="btn btn-sm btn-primary mb-1" id="export_talent">Export to clipboard</button>
			<button type="button" class="btn btn-sm btn-primary mb-1" id="export_talent_wishlist">Export to wishlist</button>
		</div>
		<div style="padding-left: 1em; display: inline-block; flex-grow: 0; flex-shrink: 99;">
			Click "<i class='fa-regular fa-eye'></i>" below to see all prerequisites
		</div>
	</div>
	<div class="talent header">
		<div>
			<div></div>
			<div title="cost">cost</div>
			<div title="aptitude matches">AM</div>
			<div title="tier">tier</div>
			<div title="talent">talent</div>
			<div title="aptitude">aptitude</div>
			<div title="aptitude">aptitude</div>
			<div title="prerequisites">prerequisites</div>
			<div title="description" style="display: none">description</div>
			<div></div>
		</div>
	</div>
	<div class="tablelike talent" id="talent"></div>
</div>

<div>
	<div id="selectedTree"></div>
</div>

<script>
	$(function () {
		new ClipboardJS('[data-clipboard-target]');
		$('#settingsToCopy').on('focus', function(event) {
			$(this).select();
		});
		// on paste into settingsToCopy
		document.getElementById("settingsToCopy").addEventListener("paste", (event) => {
			const paste = (event.clipboardData || window.clipboardData).getData("text");
			const sourceParam = new URLSearchParams(window.location.search).get('source');
			window.location.href = `w40k.html?source=${sourceParam}&cfg=${paste}`;
		});
	});
</script>

<script src="assets/scroll-top-bottom.js"></script>

</body>
</html>